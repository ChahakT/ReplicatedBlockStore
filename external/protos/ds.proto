syntax = "proto3";

package ds;

message ReadRequest {
    int64 offset = 1;
}

message ReadResponse {
    bytes data = 1;
}

message WriteRequest {
    int32 offset = 1;
    bytes data = 2;
    int32 data_length = 3;
}

message WriteResponse {
    int32 bytes_written = 1;
}

message CommitRequest {
    int32 offset = 1;
}

message AckResponse {
    bool done = 1;
}

service gRPCService {
  rpc c_read (ReadRequest) returns (ReadResponse) {}
  rpc c_write (WriteRequest) returns (WriteResponse) {}
  rpc s_read (ReadRequest) returns (ReadResponse) {}
  rpc s_write (WriteRequest) returns (AckResponse) {}
  rpc s_commit (CommitRequest) returns (AckResponse) {}
}

